
# üîÑ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ—î–∫—Ç—É —É Production

## 1. üõ†Ô∏è –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

### üîê –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ–∑–µ—Ä–≤–Ω–∏—Ö –∫–æ–ø—ñ–π
- –†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö:
```bash
pg_dump -U prod_user prod_db > backup_$(date +%F).sql
```
- –†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –ø—Ä–æ—î–∫—Ç—É:
```bash
tar -czvf project_backup_$(date +%F).tar.gz /home/deploy/your-project
```

### üìã –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ
- –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ changelog –∞–±–æ git diff (–∑–æ–∫—Ä–µ–º–∞ requirements.txt / package.json)
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –Ω–æ–≤—ñ –º—ñ–≥—Ä–∞—Ü—ñ—ó –∞–±–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

### üïí –ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è —á–∞—Å—É –ø—Ä–æ—Å—Ç–æ—é
- –Ø–∫—â–æ –∑–º—ñ–Ω–∏ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ API –∞–±–æ –ë–î ‚Äî –∑–∞–ø–ª–∞–Ω—É–≤–∞—Ç–∏ –∫–æ—Ä–æ—Ç–∫–∏–π downtime (~5-10 —Ö–≤)
- –ü–æ–≤—ñ–¥–æ–º–∏—Ç–∏ –∫–æ–º–∞–Ω–¥—É –∞–±–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, —è–∫—â–æ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ

---

## 2. üöÄ –ü—Ä–æ—Ü–µ—Å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

### ‚õî –ó—É–ø–∏–Ω–∫–∞ —Å–ª—É–∂–± (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
```bash
sudo systemctl stop gunicorn
sudo systemctl stop celery  # —è–∫—â–æ —î
```

### üîÑ –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∫–æ–¥—É
```bash
cd /home/deploy/your-project
git pull origin main
```

### üì¶ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
```bash
# backend
cd backend
source venv/bin/activate
pip install -r requirements.txt

# frontend
cd ../frontend
npm install
npm run build
```

### üîÅ –ú—ñ–≥—Ä–∞—Ü—ñ—è –ë–î (—è–∫—â–æ –∑–º—ñ–Ω–∏ —î)
```bash
# alembic (SQLAlchemy)
alembic upgrade head

# –∞–±–æ Tortoise ORM:
aerich upgrade
```

### ‚öôÔ∏è –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π (—è–∫—â–æ —î –∑–º—ñ–Ω–∏)
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `.env`
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `nginx`, `supervisor`, `systemd` —Ç–æ—â–æ

### ‚ñ∂Ô∏è –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤—ñ—Å—ñ–≤
```bash
sudo systemctl restart gunicorn
sudo systemctl reload nginx
```

---

## 3. ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

> –ü—Ä–æ–ø—É—â–µ–Ω–æ (–æ–∫—Ä–µ–º–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞)

---

## 4. üîÅ Rollback (–í—ñ–¥–∫–∞—Ç —É —Ä–∞–∑—ñ –ø–æ–º–∏–ª–∫–∏)

### üìÅ –í–∞—Ä—ñ–∞–Ω—Ç 1: –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó

- –í—ñ–¥–Ω–æ–≤–∏—Ç–∏ –ë–î:
```bash
psql -U prod_user prod_db < backup_YYYY-MM-DD.sql
```

- –í—ñ–¥–Ω–æ–≤–∏—Ç–∏ –∫–æ–¥:
```bash
tar -xzvf project_backup_YYYY-MM-DD.tar.gz -C /home/deploy/
```

### üß≠ –í–∞—Ä—ñ–∞–Ω—Ç 2: Git rollback
```bash
git log  # –∑–Ω–∞–π—Ç–∏ —Å—Ç–∞–±—ñ–ª—å–Ω–∏–π –∫–æ–º—ñ—Ç
git checkout <stable_commit_hash>
```
> –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é –¥–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ —Å—Ç–∞–Ω—É (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ) –∞–±–æ –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ backup

---

## üß† –ü–æ—Ä–∞–¥–∞

- –î–ª—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –∑–º—ñ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –æ–∫—Ä–µ–º–µ staging-—Å–µ—Ä–µ–¥–æ–≤–∏—â–µ
- –ü—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤–µ–¥—ñ—Ç—å –∂—É—Ä–Ω–∞–ª –∑–º—ñ–Ω —Ç–∞ –≤–µ—Ä—Å—ñ–π

